export default async function apiFetch(path, opts={}){const API=import.meta.env.VITE_API_URL||"http://localhost:3000";let p=path||"";const abs=/^https?:\/\//i.test(p);if(!abs){if(!p.startsWith("/"))p="/"+p; if(!p.startsWith("/api/"))p="/api"+p; p=`${API}${p}`;}const t=localStorage.getItem("token");const headers={...(opts.headers||{}),"Content-Type":"application/json",...(t?{Authorization:`Bearer ${t}`}:{})};return fetch(p,{...opts,headers});}
